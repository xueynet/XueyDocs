# update 系统升级命令

系统升级命令，用于将 XYCMS 系统升级至最新版本。

::: tip
系统升级命令仅对备份命令备份的数据库文件进行升级，不会直接对数据库进行操作。
:::

### 用法

```sh
xycms update
    --nightly
    -h, --help
```

系统升级命令必须包含指定需要升级至最新版本的备份数据文件夹 `--directory` 参数。

系统升级命令完成后，命令将在当前文件夹下生成 update 文件夹，存储升级后的数据库结构以及数据。

### 选项

| 选项 | 简写 | 说明 |
|:-----|:-----|:------|
| --nightly |  | 升级到最新隔夜版本 |
| --help | -h | 命令说明 |

::: tip
如果使用 --content-split 拆分内容表参数，升级命令将为每一个站点创建对应的内容表，并把备份数据导入至对应的内容表中；默认升级命令将保持内容表不变。
:::

### 示例

#### 基本使用

使用升级命令前需要先使用备份命令将老版本的数据库备份至文件夹中：

`xycms backup -d 'old_version_backup'`

备份完成后便可以使用升级命令了，升级命令将把备份文件中存储的数据结构改为最新版本的数据结构，升级完成后将生成新的文件夹，用于恢复命令使用。

将命令行切换到运行备份命令的文件夹中，运行升级命令：

`xycms update -d 'old_version_backup'`

升级命令执行完毕后，系统根目录将出现一个名为update的文件夹，此文件夹中存储了升级之后的数据文件。

接下来可以新建一个空数据库，修改Web.config为对应的数据库连接字符串并运行数据库恢复命令，将数据回复到指定数据库：

`xycms restore -d update`